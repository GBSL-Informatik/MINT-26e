---
page_id: 7a9f15e9-5a69-42d2-811c-0484662d6022
---

# CMS

:::warning[WIP]
Das CMS ist aktuell noch in der Entwicklungsphase und kann noch Fehler oder UnvollstÃ¤ndigkeiten enthalten.
:::

## Konzept

Das CMS verwendet den [MdxEditor](https://mdxeditor.dev/) von [Petyo Ivanov](https://github.com/petyosi) und basiert auf dem [Lexical-Editor](https://lexical.dev/) von Meta aufgebaut. Die Anbindung an Github wird mit dem offiziellen [Octokit](https://github.com/octokit) vorgenommen, wobei fÃ¼r die Github-Anmeldung und die Zugriffstoken fÃ¼r Repositories die [Teaching-Dev API](https://github.com/GBSL-Informatik/teaching-api/pull/30) verwendet wird.

Dies ermÃ¶glicht es, dass direkt aus dem CMS heraus Ã„nderungen an den Markdown-Dateien vorgenommen werden kÃ¶nnen. Da Octokit die Limitation mitbringt, dass nur eine Datei auf einmal bearbeitet werden kann, lassen sich Ã¼bers CMS auch Branches erstellen und Pull-Requests erstellen - und Bonus: auch Mergen ðŸ¥³.

### Bilder und Assets
Bilder kÃ¶nnen direkt Ã¼ber einen Bild-Dialog eingefÃ¼gt, hochgeladen und verÃ¤ndert werden. Beim Upload werden dabei Bilder stets in den Ordner `images` des bearbeiteten Dokuments abgelegt.

:::cards
Vor dem Bild-Upload
```
docs
â””â”€â”€ app-architecture
    â””â”€â”€ cms
        â””â”€â”€ index.mdx
```
::br
Nach dem Bild-Upload
```
docs
â””â”€â”€ app-architecture
    â””â”€â”€ cms
        â”œâ”€â”€ images
        â”‚   â””â”€â”€ hochgeladen.jpg
        â””â”€â”€ index.mdx
```
:::

Assets (alles andere, auch Videos, PDF's etc.) werden standardmÃ¤ssig in den Ordner `assets` abgelegt.

:::cards
Vor dem PDF-Upload
```
docs
â””â”€â”€ app-architecture
    â””â”€â”€ cms
        â””â”€â”€ index.mdx
```
::br
Nach dem PDF-Upload
```
docs
â””â”€â”€ app-architecture
    â””â”€â”€ cms
        â”œâ”€â”€ assets
        â”‚   â””â”€â”€ hochgeladen.pdf
        â””â”€â”€ index.mdx
```
:::

:::danger[GelÃ¶schte Bilder und Assets]
Bilder kÃ¶nnen ohne Ã¼berprÃ¼fung, ob sie noch in einem Dokument verwendet werden, gelÃ¶scht werden. Erst beim Builden der Seite wird dies bemerkt, was je nach Einstelung zu einem fehlerhaften Build fÃ¼hren kann.
:::


### Plugins

FÃ¼r viele Erweiterungen wurden Plugins geschrieben. Die Plugins sind grundsÃ¤tzlich an zwei Orten zu suchen:

1. Unter `@tdev-components/Cms/MdxEditor/plugins` - alles was direkt mit dem MdxEditor zu tun hat und nicht auf einem Remark-Plugin basiert.
2. Unter `@tdev-plugins/remark-*/mdx-editor-plugin` - alles was auf einem Remark-Plugin basiert liefert auch gleich das entsprechende MdxEditor-Plugin mit.

## Todos

- [ ] Installationsanleitung schreiben
- [ ] Generischer Attribute-Editor fÃ¼rs Frontmatter verwenden
- [ ] Medien-Upload (aktuell nur fÃ¼r Bilder umgesetzt)
- [ ] Keyboard-Events handeln, wenn innerhalb einer selbst geschriebenen Komponente
    - [ ] KBD Node: 2x Leerschlag = aus dem KBD-Node raus
    - [ ] BOX Node: 2x Leerschlag = aus dem BOX-Node raus
    - [ ] Admonitions: ArrowUp = neuer Absatz vorher, falls zuoberst und kein Absatz vorher
    - [ ] Admonitions: ArrowDown = neuer Absatz, falls zuunterst und kein Absatz nachher
- [ ] Deflist Komponente hinzufÃ¼gen
- [ ] Darkmode
- [ ] Ansichts-Einstellungen speichern (Richtext / Markdown)
